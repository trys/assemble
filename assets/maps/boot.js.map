{"version":3,"sources":["boot.js"],"names":["assemble","key","init","map","events","fields","mapElement","callback","document","getElementById","getAttribute","mapScript","createElement","src","body","appendChild","loaded","center","google","maps","LatLng","mapOptions","zoom","minZoom","maxZoom","mapTypeControl","scrollwheel","Map","styles","Marker","position","visible","icon","url","featureType","elementType","stylers","color","lightness","weight","visibility","saturation","setOptions","findForm","findFormToggle","addEventListener","event","preventDefault","helpers","toggleClass","findFormLocation","value","request","XMLHttpRequest","find","open","send","response","JSON","parse","this","responseText","status","primaryResult","results","window","location","href","geometry","lat","lng","inputs","querySelectorAll","i","length","addClass","checkValidity","navigator","locationButton","innerHTML","geolocation","getCurrentPosition","latlng","querySelector","coords","latitude","longitude","address_components","long_name","parentNode","addAnother","e","newInput","setAttribute","previousElementSibling","insertBefore","focus","hasClass","el","className","classList","contains","RegExp","test","add","toggle","classes","split","existingIndex","splice","push","join","removeClass","remove","replace","throttle","wait","time","ready","setTimeout","call"],"mappings":"AAAA,GAAAA,UAAA,WACA,YAEA,IAAAC,GAAA,yCAEA,QACAC,KAAA,WAEAF,SAAAG,IAAAD,KAAA,uBACAF,SAAAI,OAAAF,KAAA,0BACAF,SAAAK,UAIAF,KAEAG,WAAA,GAEAJ,KAAA,SAAAK,GAGA,GADAP,SAAAG,IAAAG,WAAAE,SAAAC,eAAA,OACAT,SAAAG,IAAAG,YAAAN,SAAAG,IAAAG,WAAAI,aAAA,YAAA,CACA,GAAAC,GAAAH,SAAAI,cAAA,SACAD,GAAAE,IAAA,4DAAAN,EAAA,QAAAN,EACAO,SAAAM,KAAAC,YAAAJ,KAIAK,OAAA,WACA,GAAAC,GAAA,GAAAC,QAAAC,KAAAC,OAAApB,SAAAG,IAAAG,WAAAI,aAAA,YAAAV,SAAAG,IAAAG,WAAAI,aAAA,aACAW,GACAC,KAAA,GACAL,OAAAA,EACAM,QAAA,EACAC,QAAA,GACAC,gBAAA,EACAC,aAAA,GAEAvB,EAAA,GAAAe,QAAAC,KAAAQ,IAAA3B,SAAAG,IAAAG,WAAAe,GAYAO,GAXA,GAAAV,QAAAC,KAAAU,QAEAC,SAAAb,EACAd,IAAAA,EACA4B,SAAA,EACAC,MACAC,IAAA,8BAKAC,YAAA,QAAAC,YAAA,WAAAC,UAAAC,MAAA,YAAAC,UAAA,OAAAJ,YAAA,YAAAC,YAAA,WAAAC,UAAAC,MAAA,YAAAC,UAAA,OAAAJ,YAAA,eAAAC,YAAA,gBAAAC,UAAAC,MAAA,YAAAC,UAAA,OAAAJ,YAAA,eAAAC,YAAA,kBAAAC,UAAAC,MAAA,YAAAC,UAAA,KAAAC,OAAA,OAAAL,YAAA,gBAAAC,YAAA,WAAAC,UAAAC,MAAA,YAAAC,UAAA,OAAAJ,YAAA,aAAAC,YAAA,WAAAC,UAAAC,MAAA,YAAAC,UAAA,OAAAJ,YAAA,MAAAC,YAAA,WAAAC,UAAAC,MAAA,YAAAC,UAAA,OAAAJ,YAAA,WAAAC,YAAA,WAAAC,UAAAC,MAAA,YAAAC,UAAA,OAAAH,YAAA,qBAAAC,UAAAI,WAAA,OAAAH,MAAA,YAAAC,UAAA,OAAAH,YAAA,mBAAAC,UAAAK,WAAA,KAAAJ,MAAA,YAAAC,UAAA,OAAAH,YAAA,cAAAC,UAAAI,WAAA,UAAAN,YAAA,UAAAC,YAAA,WAAAC,UAAAC,MAAA,YAAAC,UAAA,OAAAJ,YAAA,iBAAAC,YAAA,gBAAAC,UAAAC,MAAA,YAAAC,UAAA,OAAAJ,YAAA,iBAAAC,YAAA,kBAAAC,UAAAC,MAAA,YAAAC,UAAA,KAAAC,OAAA,QAEApC,GAAAuC,YAAAd,OAAAA,MAIAxB,QAEAF,KAAA,SAAAK,GACA,GAAAoC,GAAAnC,SAAAC,eAAA,aACA,IAAAkC,EAAA,CACA,GAAAhC,GAAAH,SAAAI,cAAA,SACAD,GAAAE,IAAA,4DAAAN,EAAA,QAAAN,EACAO,SAAAM,KAAAC,YAAAJ,KAIAK,OAAA,WAEA,GAAA2B,GAAAnC,SAAAC,eAAA,aACA,IAAAkC,EAAA,CAEA,GAAAC,GAAApC,SAAAC,eAAA,oBACAmC,GAAAC,iBAAA,QAAA,SAAAC,GACAA,EAAAC,iBACA/C,SAAAgD,QAAAC,YAAAN,EAAA,YAGA,IACAO,IADA1C,SAAAC,eAAA,iBACAD,SAAAC,eAAA,YACAkC,GAAAE,iBAAA,SAAA,SAAAC,GAGA,GAFAA,EAAAC,iBAEAG,EAAAC,MAAA,CACA,GAAAC,GAAA,GAAAC,eACAD,GAAAP,iBAAA,OAAA7C,SAAAI,OAAAkD,MACAF,EAAAG,KAAA,OAAA,yDAAAtD,EAAA,YAAAiD,EAAAC,OACAC,EAAAI,YAQAF,KAAA,WACA,GAAAG,GAAAC,KAAAC,MAAAC,KAAAC,cACAX,EAAA1C,SAAAC,eAAA,WACA,IAAA,OAAAgD,EAAAK,OAAA,CACA,GAAAC,GAAAN,EAAAO,QAAA,EACAC,QAAAC,SAAAC,KAAA,cAAAJ,EAAAK,SAAAF,SAAAG,IAAA,QAAAN,EAAAK,SAAAF,SAAAI,IAAA,aAAApB,EAAAC,SAMA9C,OAAA,WAEA,GAAAkE,GAAA/D,SAAAgE,iBAAA,0BACA,IAAAD,EACA,IAAA,GAAAE,GAAAF,EAAAG,OAAA,EAAAD,GAAA,EAAAA,IACAF,EAAAE,GAAA5B,iBAAA,OAAA,WACA7C,SAAAgD,QAAA2B,SAAAf,KAAA,WACAA,KAAAgB,kBACA,EAIA,IAAA,eAAAC,WAGA,IAAA,GAFAX,GAAA1D,SAAAgE,iBAAA,mBAEAC,EAAAP,EAAAQ,OAAA,EAAAD,GAAA,EAAAA,KACA,SAAAA,GACA,GAAAK,GAAAtE,SAAAI,cAAA,SACAkE,GAAAC,UAAA,OACA/E,SAAAgD,QAAA2B,SAAAG,EAAA,gBACAA,EAAAjC,iBAAA,QAAA,SAAAC,GAEAA,EAAAC,iBACA/C,SAAAgD,QAAA2B,SAAAG,EAAA,WACAD,UAAAG,YAAAC,mBAAA,SAAAnD,GAEA,GAAAoD,GAAA1E,SAAA2E,cAAA,gBACAD,KACAA,EAAA/B,MAAArB,EAAAsD,OAAAC,SAAA,IAAAvD,EAAAsD,OAAAE,UAGA,IAAAlC,GAAA,GAAAC,eACAD,GAAAP,iBAAA,OAAA,WACA,GAAAY,GAAAC,KAAAC,MAAAC,KAAAC,aACAJ,GAAAO,QAAA,IAAAP,EAAAO,QAAA,GAAAuB,mBAAA,KACArB,EAAAO,GAAAtB,MAAAM,EAAAO,QAAA,GAAAuB,mBAAA,GAAAC,aAGApC,EAAAG,KAAA,MAAA,2DAAAzB,EAAAsD,OAAAC,SAAA,IAAAvD,EAAAsD,OAAAE,UAAA,gBACAlC,EAAAI,WAGA,GACAU,EAAAO,GAAAgB,WAAA1E,YAAA+D,GAEAZ,EAAAO,GAAA5B,iBAAA,OAAA,WACA,GAAAe,KAAAT,MAAA,CACA,GAAAC,GAAA,GAAAC,eACAD,GAAAP,iBAAA,OAAA,WACA,GAAAY,GAAAC,KAAAC,MAAAC,KAAAC,cACAqB,EAAA1E,SAAA2E,cAAA,gBACA,IAAA,OAAA1B,EAAAK,OAAA,CACA,GAAAC,GAAAN,EAAAO,QAAA,EACAkB,GAAA/B,MAAAY,EAAAK,SAAAF,SAAAG,IAAA,IAAAN,EAAAK,SAAAF,SAAAI,OAGAlB,EAAAG,KAAA,OAAA,yDAAAtD,EAAA,YAAA2D,KAAAT,OACAC,EAAAI,UAEA,IACAiB,EAOA,KAAA,GADAiB,GAAAlF,SAAAgE,iBAAA,mBACAC,EAAAiB,EAAAhB,OAAA,EAAAD,GAAA,EAAAA,IACAiB,EAAAjB,GAAA5B,iBAAA,QAAA,SAAA8C,GACAA,EAAA5C,gBACA,IAAA6C,GAAApF,SAAAI,cAAA,QACAgF,GAAAC,aAAA,OAAAjC,KAAAkC,uBAAApF,aAAA,SACAkF,EAAAC,aAAA,OAAAjC,KAAAkC,uBAAApF,aAAA,SACAkD,KAAA6B,WAAAM,aAAAH,EAAAhC,MACAgC,EAAAI,UACA,IAKAhD,SAEAiD,SAAA,SAAAC,EAAAC,GACA,MAAAD,GAAAE,UACAF,EAAAE,UAAAC,SAAAF,GAEA,GAAAG,QAAA,QAAAH,EAAA,QAAA,MAAAI,KAAAL,EAAAC,YAIAxB,SAAA,SAAAuB,EAAAC,GACAD,EAAAE,UACAF,EAAAE,UAAAI,IAAAL,GAEAD,EAAAC,WAAA,IAAAA,GAGAlD,YAAA,SAAAiD,EAAAC,GACA,GAAAD,EAAAE,UACAF,EAAAE,UAAAK,OAAAN,OACA,CAGA,IAAA,GAFAO,GAAAR,EAAAC,UAAAQ,MAAA,KACAC,KACAnC,EAAAiC,EAAAhC,OAAAD,KACAiC,EAAAjC,KAAA0B,IACAS,EAAAnC,EAGAmC,IAAA,EACAF,EAAAG,OAAAD,EAAA,GAEAF,EAAAI,KAAAX,GAEAD,EAAAC,UAAAO,EAAAK,KAAA,OAIAC,YAAA,SAAAd,EAAAC,GACAD,EAAAE,UACAF,EAAAE,UAAAa,OAAAd,GAEAD,EAAAC,UAAAD,EAAAC,UAAAe,QAAA,GAAAZ,QAAA,UAAAH,EAAAQ,MAAA,KAAAI,KAAA,KAAA,UAAA,MAAA,MAGAI,SAAA,SAAA5G,EAAA6G,GACA,GAAAC,GACAC,GAAA,CACA,OAAA,YACAA,IACAA,GAAA,EACAD,EAAAE,WAAA,WACAF,EAAA,KACAC,GAAA,EACA/G,EAAAiH,QACAJ,UAQApH,UAAAE","file":"boot.js","sourcesContent":["var assemble = (function() {\n  \"use strict\";\n\n  var key = 'AIzaSyA0RmX6KHUGbE8MPK5x9mVV1HCTul0uziw';\n\n  return {\n    init: function() {\n\n      assemble.map.init( 'assemble.map.loaded' );\n      assemble.events.init( 'assemble.events.loaded' );\n      assemble.fields();\n\n    },\n\n    map: {\n\n      mapElement: '',\n\n      init: function( callback ) {\n\n        assemble.map.mapElement = document.getElementById( 'map' );\n        if ( assemble.map.mapElement && assemble.map.mapElement.getAttribute('data-lat') ) {\n          var mapScript = document.createElement( 'script' );\n          mapScript.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&callback=' + callback + '&key=' + key;\n          document.body.appendChild( mapScript );\n        }\n      },\n\n      loaded: function() {\n        var center = new google.maps.LatLng( assemble.map.mapElement.getAttribute('data-lat'), assemble.map.mapElement.getAttribute('data-lng') ),\n            mapOptions = {\n              zoom: 14,\n              center: center,\n              minZoom: 9,\n              maxZoom: 19,\n              mapTypeControl: false,\n              scrollwheel: false\n            },\n            map = new google.maps.Map( assemble.map.mapElement, mapOptions ),\n            marker = new google.maps.Marker(\n              {\n                position: center,\n                map: map,\n                visible: true,\n                icon: {\n                  url: '/assets/images/pin.png'\n                }\n              }\n            ),\n            // https://snazzymaps.com/style/151/ultra-light-with-labels\n            styles = [{\"featureType\":\"water\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#e9e9e9\"},{\"lightness\":17}]},{\"featureType\":\"landscape\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#f5f5f5\"},{\"lightness\":20}]},{\"featureType\":\"road.highway\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#ffffff\"},{\"lightness\":17}]},{\"featureType\":\"road.highway\",\"elementType\":\"geometry.stroke\",\"stylers\":[{\"color\":\"#ffffff\"},{\"lightness\":29},{\"weight\":0.2}]},{\"featureType\":\"road.arterial\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#ffffff\"},{\"lightness\":18}]},{\"featureType\":\"road.local\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#ffffff\"},{\"lightness\":16}]},{\"featureType\":\"poi\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#f5f5f5\"},{\"lightness\":21}]},{\"featureType\":\"poi.park\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#dedede\"},{\"lightness\":21}]},{\"elementType\":\"labels.text.stroke\",\"stylers\":[{\"visibility\":\"on\"},{\"color\":\"#ffffff\"},{\"lightness\":16}]},{\"elementType\":\"labels.text.fill\",\"stylers\":[{\"saturation\":36},{\"color\":\"#333333\"},{\"lightness\":40}]},{\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"transit\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#f2f2f2\"},{\"lightness\":19}]},{\"featureType\":\"administrative\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#fefefe\"},{\"lightness\":20}]},{\"featureType\":\"administrative\",\"elementType\":\"geometry.stroke\",\"stylers\":[{\"color\":\"#fefefe\"},{\"lightness\":17},{\"weight\":1.2}]}];\n\n          map.setOptions( { styles: styles } );\n      }\n    },\n\n    events: {\n\n      init: function( callback ) {\n        var findForm = document.getElementById('find-event');\n        if ( findForm ) {\n          var mapScript = document.createElement( 'script' );\n          mapScript.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&callback=' + callback + '&key=' + key;\n          document.body.appendChild( mapScript );\n        }\n      },\n\n      loaded: function() {\n\n        var findForm = document.getElementById('find-event');\n        if ( findForm ) {\n          \n          var findFormToggle = document.getElementById('find-event-toggle');\n          findFormToggle.addEventListener('click', function(event) {\n            event.preventDefault();\n            assemble.helpers.toggleClass(findForm, 'showing');\n          });\n\n          var findFormTrigger = document.getElementById('js-find-event');\n          var findFormLocation = document.getElementById('location');\n          findForm.addEventListener('submit', function(event) {\n            event.preventDefault();\n\n            if ( findFormLocation.value ) {\n              var request = new XMLHttpRequest();\n              request.addEventListener('load', assemble.events.find);\n              request.open('POST', 'https://maps.googleapis.com/maps/api/geocode/json?key=' + key + '&address=' + findFormLocation.value );\n              request.send();\n            }\n          });\n\n        }\n\n      },\n\n      find: function() {\n        var response = JSON.parse( this.responseText );\n        var findFormLocation = document.getElementById('location');\n        if ( response.status === 'OK' ) {\n          var primaryResult = response.results[ 0 ];\n          window.location.href = '/event?lat=' + primaryResult.geometry.location.lat + '&lng=' + primaryResult.geometry.location.lng + '&location=' + findFormLocation.value;\n        }\n      }\n\n    },\n\n    fields: function() {\n\n      var inputs = document.querySelectorAll('input, textarea, select');\n      if (inputs) {\n        for (var i = inputs.length - 1; i >= 0; i--) {\n          inputs[i].addEventListener('blur', function() {\n            assemble.helpers.addClass(this, 'focused');\n            this.checkValidity();\n          }, false);\n        };\n      }\n\n      if ('geolocation' in navigator) {\n        var location = document.querySelectorAll('[name=location]');\n        \n        for (var i = location.length - 1; i >= 0; i--) {\n          (function(i) {\n            var locationButton = document.createElement('button');\n            locationButton.innerHTML = 'Find';\n            assemble.helpers.addClass(locationButton, 'find-address');\n            locationButton.addEventListener('click', function(event) {\n              \n              event.preventDefault();\n              assemble.helpers.addClass(locationButton, 'loading')\n              navigator.geolocation.getCurrentPosition(function(position) {\n\n                var latlng = document.querySelector('[name=latlng]');\n                if ( latlng ) {\n                  latlng.value = position.coords.latitude + ',' + position.coords.longitude;\n                }\n                \n                var request = new XMLHttpRequest();\n                request.addEventListener('load', function() {\n                  var response = JSON.parse( this.responseText );\n                  if ( response.results[0] && response.results[0].address_components[2] ) {\n                    location[i].value = response.results[0].address_components[2].long_name;\n                  }\n                });\n                request.open('GET', 'http://maps.googleapis.com/maps/api/geocode/json?latlng=' + position.coords.latitude + ',' + position.coords.longitude + '&sensor=true' );\n                request.send();\n\n              });\n            }, false);\n            location[i].parentNode.appendChild(locationButton);\n\n            location[i].addEventListener('blur', function() {\n              if (this.value) {\n                var request = new XMLHttpRequest();\n                request.addEventListener('load', function() {\n                  var response = JSON.parse( this.responseText );\n                  var latlng = document.querySelector('[name=latlng]');\n                  if ( response.status === 'OK' ) {\n                    var primaryResult = response.results[ 0 ];\n                    latlng.value = primaryResult.geometry.location.lat + ',' + primaryResult.geometry.location.lng;\n                  }\n                });\n                request.open('POST', 'https://maps.googleapis.com/maps/api/geocode/json?key=' + key + '&address=' + this.value );\n                request.send();\n              }\n            }, false);\n          })(i);\n        };\n      }\n\n\n\n      var addAnother = document.querySelectorAll('.js-add-another');\n      for (var i = addAnother.length - 1; i >= 0; i--) {\n        addAnother[i].addEventListener('click', function(e) {\n          e.preventDefault();\n          var newInput = document.createElement('input');\n          newInput.setAttribute('type', this.previousElementSibling.getAttribute('type'));\n          newInput.setAttribute('name', this.previousElementSibling.getAttribute('name'));\n          this.parentNode.insertBefore(newInput, this);\n          newInput.focus();\n        }, false);\n      };\n\n    },\n\n    helpers: {\n\n      hasClass: function(el, className) {\n        if (el.classList) {\n          return el.classList.contains(className);\n        } else {\n          return new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className);\n        }\n      },\n\n      addClass: function(el, className) {\n        if (el.classList)\n          el.classList.add(className);\n        else\n          el.className += ' ' + className;\n      },\n\n      toggleClass: function(el, className) {\n        if (el.classList) {\n          el.classList.toggle(className);\n        } else {\n          var classes = el.className.split(' ');\n          var existingIndex = -1;\n          for (var i = classes.length; i--;) {\n            if (classes[i] === className)\n            existingIndex = i;\n          }\n\n          if (existingIndex >= 0)\n            classes.splice(existingIndex, 1);\n          else\n            classes.push(className);\n\n          el.className = classes.join(' ');\n        }\n      },\n\n      removeClass: function(el, className) {\n        if (el.classList)\n          el.classList.remove(className);\n        else\n          el.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n      },\n\n      throttle: function(callback, wait) {\n        var time,\n        ready = true;\n        return function() {\n          if(ready) {\n            ready = false;\n            time = setTimeout(function(){\n              time = null;\n              ready = true;\n              callback.call();\n            }, wait);\n          }\n        }\n      }\n    }\n  }\n}());\n\nassemble.init();"],"sourceRoot":"/source/"}